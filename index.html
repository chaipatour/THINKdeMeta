<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>System Info Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: #0d1117;
      color: #fff;
      font-family: Consolas, monospace;
      padding: 20px;
    }
    .line {
      margin: 6px 0;
      font-size: 15px;
    }
    .label {
      font-weight: bold;
    }
    /* разные цвета */
    .moai { color: #58a6ff; }
    .ip { color: #ff7b72; }
    .isp { color: #f2cc60; }
    .support { color: #a5d6a7; }
    .session { color: #c792ea; }
    .speed { color: #64b5f6; }
    .meta { color: #ef9a9a; }
  </style>
</head>
<body>
  <div class="line moai"><span class="label">MOAI:</span> <span id="browser">loading...</span></div>
  <div class="line ip"><span class="label">IP ENTRANCE:</span> <span id="ip">loading...</span></div>
  <div class="line isp"><span class="label">DIGITAL SUPPLIER:</span> <span id="isp">loading...</span></div>
  <div class="line support"><span class="label">SUPPORT CODE:</span> <span id="support">loading...</span></div>
  <div class="line session"><span class="label">SESSION ID:</span> <span id="session">loading...</span></div>
  <div class="line speed"><span class="label">THROUGHPUT CAPACITY:</span> <span id="speed">measuring...</span></div>
  <div class="line meta"><span class="label">THINKSECURE_deliveryMETA:</span> <span id="meta">loading...</span></div>

<script>
  // --- random generator (8–14 символов) ---
  function randCode(min=8, max=14) {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    const len = Math.floor(Math.random() * (max - min + 1)) + min;
    return Array.from({length: len}, () => chars[Math.floor(Math.random()*chars.length)]).join('');
  }

  // --- detect browser ---
  function getBrowser() {
    const ua = navigator.userAgent;
    if (/Edg\//.test(ua)) return "Edge " + (ua.match(/Edg\/([\d\.]+)/)||[])[1];
    if (/OPR\//.test(ua)) return "Opera " + (ua.match(/OPR\/([\d\.]+)/)||[])[1];
    if (/Chrome\//.test(ua) && !/Chromium/.test(ua)) return "Chrome " + (ua.match(/Chrome\/([\d\.]+)/)||[])[1];
    if (/Firefox\//.test(ua)) return "Firefox " + (ua.match(/Firefox\/([\d\.]+)/)||[])[1];
    if (/Safari\//.test(ua) && /Version\//.test(ua)) return "Safari " + (ua.match(/Version\/([\d\.]+)/)||[])[1];
    return ua;
  }

  // --- fetch IP + ISP ---
  async function fetchIP() {
    try {
      const res = await fetch("https://ipapi.co/json/");
      const data = await res.json();
      document.getElementById("ip").textContent = data.ip || "unknown";
      document.getElementById("isp").textContent = data.org || "unknown";
    } catch {
      document.getElementById("ip").textContent = "error";
      document.getElementById("isp").textContent = "error";
    }
  }

  // --- fake throughput test (small image download) ---
  async function measureSpeed() {
    try {
      const url = "https://via.placeholder.com/2000x2000.png?" + Math.random();
      const start = performance.now();
      const res = await fetch(url);
      const blob = await res.blob();
      const end = performance.now();
      const sizeMb = blob.size / (1024*1024);
      const timeSec = (end-start)/1000;
      const mbps = (sizeMb*8/timeSec).toFixed(2);
      document.getElementById("speed").textContent = mbps + " Mbps";
    } catch {
      document.getElementById("speed").textContent = "error";
    }
  }

  // --- init ---
  document.getElementById("browser").textContent = getBrowser();
  document.getElementById("support").textContent = randCode();
  document.getElementById("session").textContent = randCode();
  document.getElementById("meta").textContent = randCode();

  fetchIP();
  measureSpeed();
</script>
</body>
</html>
